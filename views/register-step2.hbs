<div class="registration-container">
    <!-- Step Indicator -->
    <div class="step-indicator">
        <div class="step completed">
            <div class="step-number">✓</div>
            <div class="step-label">Account</div>
        </div>
        <div class="step active">
            <div class="step-number">2</div>
            <div class="step-label">Tax ID</div>
        </div>
        <div class="step">
            <div class="step-number">3</div>
            <div class="step-label">Confirm</div>
        </div>
    </div>

    <!-- Error Message -->
    {{#if error}}
    <div class="alert alert-error">
        <div class="alert-icon">⚠️</div>
        <div class="alert-content">
            <div class="alert-title">Error</div>
            <div class="alert-message">{{error}}</div>
        </div>
    </div>
    {{/if}}

    <!-- Registration Form -->
    <div class="card">
        <div class="card-header">
            <h2>Provide Your Tax Identity Information</h2>
            <p>We need this information to help you file your ITR securely</p>
        </div>

        <div class="card-body">
            <form method="POST" action="/register/step2" id="step2Form">
                <!-- Aadhaar Number -->
                <div class="form-group">
                    <label for="aadhaar">Aadhaar Number *</label>
                    <input 
                        type="text" 
                        id="aadhaar" 
                        name="aadhaar" 
                        value="{{formData.aadhaar}}"
                        placeholder="1234 5678 9012"
                        maxlength="14"
                        required
                        data-mask="aadhaar"
                    >
                    <small style="color: var(--text-light);">12-digit number (spaces optional)</small>
                    <div class="form-error" id="aadhaarError"></div>
                </div>

                <!-- PAN Number -->
                <div class="form-group">
                    <label for="pan">PAN Number *</label>
                    <input 
                        type="text" 
                        id="pan" 
                        name="pan" 
                        value="{{formData.pan}}"
                        placeholder="ABCDE1234F"
                        maxlength="10"
                        required
                        style="text-transform: uppercase;"
                    >
                    <small style="color: var(--text-light);">10-character format (e.g., ABCDE1234F)</small>
                    <div class="form-error" id="panError"></div>
                </div>

                <!-- Info Box -->
                <div class="alert alert-info" style="margin-top: var(--spacing-lg);">
                    <div class="alert-icon">ℹ️</div>
                    <div class="alert-content">
                        <div class="alert-title">Security Notice</div>
                        <div class="alert-message">
                            Your tax identity information is encrypted and protected. 
                            It will only be used for ITR filing as per your consent.
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div style="display: flex; gap: var(--spacing-md); margin-top: var(--spacing-xl);">
                    <a href="/register/step1" class="btn btn-secondary" style="flex: 1; text-align: center; padding: var(--spacing-md);">
                        ← Back
                    </a>
                    <button type="submit" class="btn btn-primary" style="flex: 1; padding: var(--spacing-md);">
                        Next: Review Information →
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script src="/js/registration-validation.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        if (window.RegistrationValidator) {
            window.RegistrationValidator.validateStep2();
        }
    });
</script>
